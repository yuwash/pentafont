{"version":3,"sources":["pentafont.js"],"names":["config","encoding","renderer","fontSize","fontWidth","lineHeight","letterSpacing","minWidth","monospace","encodingDotsies","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","_31","encodingEtaisparse","_29","_30","encodingLatinoid","renderByte","bitRenderer","byte_","width","height","reduce","accumulator","bit","push","renderByteEtaionsparse","grid","renderByteDotsies","makeTransform","x_","y_","latinoidPolygons","renderByteLatinoid","map","etaionsparsePentagonPolygons","renderByteEtaionsparsePentagon","etaionsparsePenPolygons","renderByteEtaionsparsePen","getMaxX","polygons","max","points","max_","getMinX","start","min","min_","movePolygons","deltaX","renderLetters","text","Array","from","character","maxBruttoLetterWidth","bruttoLineHeight","lastPos","length","xWithoutRow","bruttoLetterWidth","addRow","getEncoding","getRenderer","characterToRender","toLowerCase","fontHeight","polygonsMonospace","pointsFormat","point","name","etaionsparse","dotsies","latinoid","etaionsparsePen","etaionsparsePentagon","getWidth","parentElement","document","getElementById","parentWidth","getBoundingClientRect","ractive","Ractive","target","template","data","imageFilename","imageURL","updateImageFilename","set","get","substring","updateImageURL","find","linkElement","renderElement","svgFile","Blob","innerHTML","type","URL","createObjectURL","observe","onrender","window","addEventListener"],"mappings":"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","file":"pentafont.471c5aa8.js","sourceRoot":"../pentafont","sourcesContent":["const config = {\n  encoding: 'etaionsparse',\n  renderer: 'etaionsparse',\n  fontSize: 15,\n  fontWidth: 0.2,  // monospace or maximum width\n  lineHeight: 1.5,\n  letterSpacing: 0,\n  minWidth: 240,\n  monospace: false,\n}\n\nconst encodingDotsies = {\n  ' ': 0,\n  a: 0b00001,\n  b: 0b00010,\n  c: 0b00100,\n  d: 0b01000,\n  e: 0b10000,\n  f: 0b00011,\n  g: 0b00110,\n  h: 0b01100,\n  i: 0b11000,\n  j: 0b00101,\n  k: 0b01010,\n  l: 0b10100,\n  m: 0b01001,\n  n: 0b10010,\n  o: 0b10001,\n  p: 0b00111,\n  q: 0b01011,\n  r: 0b01101,\n  s: 0b01110,\n  t: 0b10110,\n  u: 0b11010,\n  v: 0b11100,\n  w: 0b10011,\n  x: 0b10101,\n  y: 0b11001,\n  z: 0b01111,\n  _31: 0b11111,\n}\n\nconst encodingEtaisparse = {\n  ' ': 0,\n  a: 0b01000,\n  b: 0b00111,\n  c: 0b01010,\n  d: 0b00101,\n  e: 0b00010,\n  f: 0b00110,\n  g: 0b11100,\n  h: 0b11000,\n  i: 0b10001,\n  j: 0b01101,\n  k: 0b11010,\n  l: 0b10100,\n  m: 0b10101,\n  n: 0b10000,\n  o: 0b00100,\n  p: 0b01100,\n  q: 0b10110,\n  r: 0b01001,\n  s: 0b10010,\n  t: 0b00001,\n  u: 0b00011,\n  v: 0b11001,\n  w: 0b01011,\n  x: 0b01110,\n  y: 0b10011,\n  z: 0b11011,\n  '.': 0b01111,\n  ',': 0b10111,\n  _29: 0b11101,\n  _30: 0b11110,\n  _31: 0b11111,\n}\n\nconst encodingLatinoid = {\n  ' ': 0,\n  a: 0b11000,\n  b: 0b01101,\n  c: 0b10010,\n  d: 0b01001,\n  e: 0b10110,\n  f: 0b01110,\n  g: 0b11010,\n  h: 0b11001,\n  i: 0b00001,\n  j: 0b00010,\n  k: 0b11101,\n  l: 0b00101,\n  m: 0b11100,\n  n: 0b10011,\n  o: 0b00100,\n  p: 0b01100,\n  q: 0b10100,\n  r: 0b11110,\n  s: 0b10001,\n  t: 0b10101,\n  u: 0b00110,\n  v: 0b00011,\n  w: 0b00111,\n  x: 0b11011,\n  y: 0b01011,\n  z: 0b01010,\n  '.': 0b10000,\n  ',': 0b01000,\n  _29: 0b01111,\n  _30: 0b10111,\n  _31: 0b11111,\n}\n\nconst renderByte = (bitRenderer, byte_, x, y, width, height) => (\n  [0, 1, 2, 3, 4]\n).reduce((accumulator, bit) => {\n  if (0 < (byte_ >> bit) % 2) {\n    accumulator.push(bitRenderer(bit, x, y, width, height))\n  }\n  return accumulator\n}, [])\n\nconst renderByteEtaionsparse = (byte_, x, y, width, height) => renderByte((\n    bit, x, y, width, height) => {\n  const grid = [\n    [x, y],  // 0\n    [x, y + height / 2],  // 1\n    [x, y + height],  // 2\n    [x + width, y],  // 3\n    [x + width, y + height / 3],  // 4\n    [x + width, y + height * 2 / 3],  // 5\n    [x + width, y + height],  // 6\n  ]\n  if (bit == 0) {\n    return [ grid[0], grid[4], grid[3] ]\n  } else if (bit == 1) {\n    return [ grid[0], grid[1], grid[4] ]\n  } else if (bit == 2) {\n    return [ grid[1], grid[5], grid[4] ]\n  } else if (bit == 3) {\n    return [ grid[1], grid[2], grid[5] ]\n  } else if (bit == 4) {\n    return [ grid[2], grid[6], grid[5] ]\n  }\n}, byte_, x, y, width, height)\n\nconst renderByteDotsies = (byte_, x, y, width, height) => renderByte((\n    bit, x, y, width, height) => [\n  [x, y + bit * height / 5],\n  [x, y + (bit + 1) * height / 5],\n  [x + width, y + (bit + 1) * height / 5],\n  [x + width, y + bit * height / 5],\n], byte_, x, y, width, height)\n\nconst makeTransform = (x, y, width, height) => ([x_, y_]) => [\n  x + x_ * width / 5,\n  y + y_ * height / 10,\n]\n\nconst latinoidPolygons = [\n  [ [0, 0], [1, 5], [2, 5], [2, 1], [3, 0] ],\n  [ [4, 0], [3, 3], [1, 4], [2, 5], [4, 4], [5, 2] ],\n  [ [2, 4], [1, 6], [5, 6], [4, 5] ],\n  [ [1, 6], [0, 8], [2, 10], [3, 7], [2, 6] ],\n  [ [2, 5], [2, 6], [4, 10], [5, 10], [4, 7] ],\n]\n\nconst renderByteLatinoid = (byte_, x, y, width, height) => renderByte((\n    bit, x, y, width, height) => {\n  return latinoidPolygons[bit].map(makeTransform(x, y, width, height))\n}, byte_, x, y, width, height)\n\nconst etaionsparsePentagonPolygons = [\n  [ [2, 1], [3, 3], [5, 2], [5, 0], [3, 0] ],\n  [ [0, 2], [0, 3], [2, 1], [3, 3], [1, 4], [0, 3], [0, 4], [2, 5], [4, 3], [2, 0] ],\n  [ [2, 5], [4, 7], [5, 6], [5, 4], [4, 3] ],\n  [ [0, 6], [0, 7], [1, 6], [3, 7], [2, 9], [0, 7], [0, 8], [2, 10], [4, 7], [2, 5] ],\n  [ [2, 9], [3, 10], [5, 10], [5, 8], [3, 7] ],\n]\n\nconst renderByteEtaionsparsePentagon = (byte_, x, y, width, height) => renderByte((\n    bit, x, y, width, height) => {\n  return etaionsparsePentagonPolygons[bit].map(makeTransform(x, y, width, height))\n}, byte_, x, y, width, height)\n\nconst etaionsparsePenPolygons = [\n  [ [2, 0], [3, 3], [4, 3], [5, 1], [5, 0] ],\n  [ [0, 4], [1, 5], [2, 3], [4, 3], [1, 1], [1, 0] ],\n  [ [1, 5], [2, 7], [4, 7], [5, 6], [4, 5], [3, 6], [3, 4], [4, 5], [5, 4], [4, 3], [2, 3] ],\n  [ [0, 6], [1, 10], [1, 9], [4, 7], [2, 7], [1, 5] ],\n  [ [3, 7], [2, 10], [5, 10], [5, 9], [4, 7] ],\n]\n\nconst renderByteEtaionsparsePen = (byte_, x, y, width, height) => renderByte((\n    bit, x, y, width, height) => {\n  return etaionsparsePenPolygons[bit].map(makeTransform(x, y, width, height))\n}, byte_, x, y, width, height)\n\nconst getMaxX = (polygons) => polygons.reduce((max, points) => (\n  points.reduce((max_, [x, y]) => (max_ < x ? x : max_), max)\n), 0)  // assuming not all points are in negative area\n\nconst getMinX = (polygons, start) => polygons.reduce((min, points) => (\n  points.reduce((min_, [x, y]) => (x < min_ ? x : min_), min)\n), start)\n\nconst movePolygons = (polygons, deltaX) => polygons.map(\n  points => points.map(([x, y]) => [x + deltaX, y]))\n\nconst renderLetters = (text, width, config) => (\n  Array.from(text)\n).reduce((accumulator, character) => {\n  const maxBruttoLetterWidth = config.fontSize * (\n    config.fontWidth + config.letterSpacing)\n  const bruttoLineHeight = config.fontSize * config.lineHeight\n  const lastPos = (\n    accumulator.length ? accumulator[accumulator.length - 1] : null)\n  const xWithoutRow = lastPos ? lastPos.x + lastPos.bruttoLetterWidth : 0\n  const addRow = lastPos && width < xWithoutRow + maxBruttoLetterWidth\n  // the last letter and this letter follows lastPos\n  // currently always using max (monospace) width for this thus not\n  // using the canvas space most efficiently\n  const x = addRow ? 0 : xWithoutRow\n  const y = lastPos ? (lastPos.y + (addRow ? bruttoLineHeight : 0)) : 0\n  const encoding = getEncoding(config.encoding)\n  const renderer = getRenderer(config.renderer)\n  let characterToRender = character.toLowerCase()\n  if (!(characterToRender in encoding)) {\n    characterToRender = '_31'\n  }\n  const fontHeight = config.fontSize\n  const fontWidth = config.fontSize * config.fontWidth\n  const polygonsMonospace = renderer(\n      encoding[characterToRender], x, y, fontWidth, fontHeight)\n  const polygons = config.monospace ? polygonsMonospace : movePolygons(\n    polygonsMonospace,\n    x - getMinX(polygonsMonospace, x + maxBruttoLetterWidth))\n  const bruttoLetterWidth = (\n    (config.monospace || !polygons.length)  // whitespace has no polygons\n    ? maxBruttoLetterWidth : getMaxX(polygons) - x)\n  accumulator.push({ polygons, x, y, bruttoLetterWidth })\n  return accumulator\n}, [])\n\nconst pointsFormat = points => points.reduce((accumulator, point) => {\n  return accumulator + `${point[0]},${point[1]} `  // FIXME trailing space\n}, '')\n\nconst getEncoding = name => ({\n  etaionsparse: encodingEtaisparse,\n  dotsies: encodingDotsies,\n  latinoid: encodingLatinoid,\n}[name] || encodingEtaisparse)\n\nconst getRenderer = name => ({\n  etaionsparse: renderByteEtaionsparse,\n  etaionsparsePen: renderByteEtaionsparsePen,\n  etaionsparsePentagon: renderByteEtaionsparsePentagon,\n  dotsies: renderByteDotsies,\n  latinoid: renderByteLatinoid,\n}[name] || renderByteEtaionsparse)\n\nconst getWidth = () => {\n  const parentElement = document.getElementById('render-view')\n  if (!parentElement) {\n    return config.minWidth\n  }\n  const parentWidth = parentElement.getBoundingClientRect().width\n  return config.minWidth < parentWidth ? parentWidth : config.minWidth\n}\n  \nconst ractive = new Ractive({\n  target: '#reactive-target',\n  template: '#reactive-template',\n  data: {\n    config: config,\n    text: 'etaion shrdl ucmfw ypvbgk jqxz,.;',\n    imageFilename: 'untitled.svg',\n    imageURL: '#',\n    width: config.minWidth,\n    pointsFormat: pointsFormat,\n    renderLetters: renderLetters,\n    updateImageFilename: function () {\n      this.set(\n        'imageFilename',\n        `${ (this.get('text') || 'untitled').substring(0, 15) }.svg`)\n    },\n    updateImageURL: function () {\n      const linkElement = this.find('#image-link')\n      const renderElement = this.find('#render-view')\n      const svgFile = new Blob([renderElement.innerHTML], { type: 'text/svg' })\n      this.set('imageURL', URL.createObjectURL(svgFile))\n    },\n  },\n  observe: {\n    'text': function () {\n      this.get('updateImageFilename')()\n    },\n    'text width config.*': function () {\n      this.get('updateImageURL')()\n    },\n  },\n  onrender: function () {\n    this.set('width', getWidth())\n  },\n})\n\nwindow.addEventListener('resize', () => ractive.onrender())\n"]}